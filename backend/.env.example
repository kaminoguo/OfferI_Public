# OfferI Backend Environment Variables
# Copy this file to .env and fill in your values

# ============================================
# LiteLLM Proxy Configuration
# ============================================
# LiteLLM proxy URL (start with: litellm --config litellm_config.yaml --port 4000)
ANTHROPIC_BASE_URL=http://localhost:4000
ANTHROPIC_AUTH_TOKEN=sk-1234  # Any dummy value works with LiteLLM

# ============================================
# Model Selection (Two-Stage Pipeline)
# ============================================
# Stage 1: Primary model for analysis with MCP tools (A/B/C Testing)
#   Option A: o4-mini-deep-research-analysis (built-in search, $10/1K, ~$0.90-1.60/report) [RECOMMENDED]
#   Option B: o4-mini-high-analysis (Claude Code WebSearch, $10/1K, ~$1.00-2.00/report)
#   Option C: o4-mini-high-online-analysis (Exa AI search, $4/1K results, ~$2.00-3.00/report)
PRIMARY_MODEL=o4-mini-deep-research-analysis

# Stage 2: Review model for expert validation with Exa search (no MCP tools)
# Uses GPT-5 Pro + OpenRouter :online for premium validation
REVIEW_MODEL=gpt5-pro-review

# ============================================
# OpenRouter API Key
# ============================================
# Sign up at https://openrouter.ai/ to get your API key
# This key is used by LiteLLM to access 400+ models
OPENROUTER_API_KEY=sk-or-v1-xxxxx

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
# REDIS_PASSWORD=  # Optional, leave empty if no password

# ============================================
# MCP Server Configuration
# ============================================
MCP_CONFIG_PATH=/app/mcp/config.json
MCP_DB_PATH=/app/mcp/programs.db

# ============================================
# FastAPI Server Configuration
# ============================================
HOST=0.0.0.0
PORT=8000
DEBUG=false

# CORS: Add your frontend URLs (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,https://offeri.com

# ============================================
# Output Configuration
# ============================================
OUTPUT_DIR=/app/outputs
LOG_DIR=/app/logs

# ============================================
# Worker Configuration
# ============================================
# Number of concurrent workers for job processing
# Each worker uses ~22MB RAM, so 12 workers = ~264MB total
# On a 4GB server: 12 workers = 48 jobs/hour capacity
NUM_WORKERS=12
WORKER_TIMEOUT=900  # 15 minutes per job

# ============================================
# Cleanup Configuration
# ============================================
# Delete old PDFs and jobs after N days
CLEANUP_DAYS=7

# ============================================
# Authentication & Payment
# ============================================
# Clerk Authentication
CLERK_SECRET_KEY=sk_test_xxxxx

# Stripe Payment
STRIPE_SECRET_KEY=sk_test_xxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# ============================================
# Database Configuration
# ============================================
# PostgreSQL for user credits and transactions
DATABASE_URL=postgresql://user:password@localhost:5432/offeri
